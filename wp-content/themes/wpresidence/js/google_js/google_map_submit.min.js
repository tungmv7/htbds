var geocoder;var map;var selected_id="";var gmarkers=[];function initialize(){geocoder=new google.maps.Geocoder();var d=jQuery("#property_latitude").val();var e=jQuery("#property_longitude").val();if(d===""){d=google_map_submit_vars.general_latitude}if(e===""){e=google_map_submit_vars.general_longitude}var b={flat:false,noClear:false,zoom:17,scrollwheel:false,draggable:true,disableDefaultUI:false,center:new google.maps.LatLng(d,e),mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("googleMapsubmit"),b);google.maps.visualRefresh=true;var a=new google.maps.LatLng(d,e);placeSavedMarker(a);if(mapfunctions_vars.map_style!==""){var c=JSON.parse(mapfunctions_vars.map_style);map.setOptions({styles:c})}google.maps.event.addListener(map,"click",function(f){placeMarker(f.latLng)})}function placeSavedMarker(b){removeMarkers();var a=new google.maps.Marker({position:b,map:map});gmarkers.push(a);var c=new google.maps.InfoWindow({content:"Latitude: "+b.lat()+"<br>Longitude: "+b.lng()});c.open(map,a)}function codeAddress(){var a=document.getElementById("property_address").value;city=jQuery("#property_city_submit").val();var b=a+","+city;var c=document.getElementById("property_county").value;if(c){var b=b+","+c}var d=document.getElementById("property_country").value;if(d){var b=b+","+d}geocoder.geocode({address:b},function(g,f){if(f==google.maps.GeocoderStatus.OK){map.setCenter(g[0].geometry.location);var e=new google.maps.Marker({map:map,position:g[0].geometry.location});gmarkers.push(e);var h=new google.maps.InfoWindow({content:"Latitude: "+g[0].geometry.location.lat()+"<br>Longitude: "+g[0].geometry.location.lng()});h.open(map,e);document.getElementById("property_latitude").value=g[0].geometry.location.lat();document.getElementById("property_longitude").value=g[0].geometry.location.lng()}else{alert(google_map_submit_vars.geo_fails+f)}})}function placeMarker(b){removeMarkers();var a=new google.maps.Marker({position:b,map:map});gmarkers.push(a);var c=new google.maps.InfoWindow({content:"Latitude: "+b.lat()+"<br>Longitude: "+b.lng()});c.open(map,a);document.getElementById("property_latitude").value=b.lat();document.getElementById("property_longitude").value=b.lng()}function removeMarkers(){for(i=0;i<gmarkers.length;i++){gmarkers[i].setMap(null)}}function setMarkers(b,a){}jQuery("#open_google_submit").click(function(){setTimeout(function(){initialize();google.maps.event.trigger(map,"resize")},300)});jQuery("#google_capture").click(function(a){a.preventDefault();removeMarkers();codeAddress()});google.maps.event.addDomListener(window,"load",initialize);jQuery(document).ready(function(g){g("#imagelist").sortable({revert:true,update:function(k,l){var j,h;j="";g("#imagelist .uploaded_images").each(function(){h=g(this).attr("data-imageid");if(typeof h!="undefined"){j=j+","+h}});g("#attachid").val(j)},});var f,e;var c={types:["(cities)"],componentRestrictions:{country:"uk"}};var d={establishment:"long_name",street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"long_name",administrative_area_level_2:"long_name",country:"long_name",postal_code:"short_name",postal_code_prefix:"short_name",neighborhood:"long_name"};if(google_map_submit_vars.enable_auto==="yes"){f=new google.maps.places.Autocomplete((document.getElementById("property_address")),{types:["geocode"],partial_match:true});google.maps.event.addListener(f,"place_changed",function(){var h=f.getPlace();a(h)});e=new google.maps.places.Autocomplete((document.getElementById("property_city_submit")),{types:["(cities)"]});google.maps.event.addListener(e,"place_changed",function(){var h=e.getPlace();a(h)})}function a(h){console.log(h);g("#property_area").val("");g("#property_zip").val("");g("#property_county").val("");g("#property_city_submit").val("");for(var l=0;l<h.address_components.length;l++){var k=h.address_components[l].types[0];var j="";var m=h.address_components[l][d[k]];if(k==="street_number"||k==="route"){}else{if(k==="neighborhood"){g("#property_area").val(m)}else{if(k==="postal_code_prefix"){g("#property_zip").val(m)}else{if(k==="postal_code"){g("#property_zip").val(m)}else{if(k==="administrative_area_level_2"){g("#property_county").val(m)}else{if(k==="administrative_area_level_1"){g("#property_county").val(m)}else{if(k==="locality"){g("#property_city_submit").val(m)}else{if(k==="country"){g("#property_country").val(m)}else{}}}}}}}}}}jQuery("#google_capture2").click(function(h){h.preventDefault();b()});function b(){var h=document.getElementById("property_address").value;var m=jQuery("#property_city_submit").val();var j=h+","+m;if(document.getElementById("property_state")){var k=document.getElementById("property_state").value;if(k){var j=j+","+k}}if(document.getElementById("property_country")){var l=document.getElementById("property_country").value;if(l){var j=j+","+l}}geocoder.geocode({address:j},function(p,o){if(o==google.maps.GeocoderStatus.OK){map.setCenter(p[0].geometry.location);var n=new google.maps.Marker({map:map,position:p[0].geometry.location});var q=new google.maps.InfoWindow({content:"Latitude: "+p[0].geometry.location.lat()+"<br>Longitude: "+p[0].geometry.location.lng()});q.open(map,n);document.getElementById("property_latitude").value=p[0].geometry.location.lat();document.getElementById("property_longitude").value=p[0].geometry.location.lng()}else{alert(google_map_submit_vars.geo_fails+o)}})}});