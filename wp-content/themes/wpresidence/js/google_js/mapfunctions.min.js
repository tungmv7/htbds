var pin_images=mapfunctions_vars.pin_images;var images=jQuery.parseJSON(pin_images);var ipad_time=0;var infobox_id=0;var shape={coord:[1,1,1,38,38,59,59,1],type:"poly"};var mcOptions;var mcluster;var clusterStyles;var pin_hover_storage;var first_time_wpestate_show_inpage_ajax_half=0;var panorama;var infoBox_sh=null;function wpestate_map_shortcode_function(){var u=parseInt(jQuery("#googleMap_shortcode").attr("data-post_id"),10);var ac=jQuery("#googleMap_shortcode").attr("data-cur_lat");var b=jQuery("#googleMap_shortcode").attr("data-cur_long");var ad;var I;var Z=[];if(typeof googlecode_property_vars==="undefined"){ad=5;heading=0}else{ad=googlecode_property_vars.page_custom_zoom;heading=parseInt(googlecode_property_vars.camera_angle)}var af={flat:false,noClear:false,zoom:parseInt(ad),scrollwheel:false,draggable:true,center:new google.maps.LatLng(ac,b),streetViewControl:false,disableDefaultUI:true};I=new google.maps.Map(document.getElementById("googleMap_shortcode"),af);google.maps.visualRefresh=true;width_browser=jQuery(window).width();infobox_width=700;vertical_pan=-215;if(width_browser<900){infobox_width=500}if(width_browser<600){infobox_width=400}if(width_browser<400){infobox_width=200}var g=document.createElement("div");var t={content:g,disableAutoPan:true,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:false,pane:"floatPane",enableEventPropagation:true};infoBox_sh=new InfoBox(t);if(mapfunctions_vars.map_style!==""){var T=JSON.parse(mapfunctions_vars.map_style);I.setOptions({styles:T})}var aa=u;var X=ac;var Q=b;var V=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-title"));var U=jQuery("#googleMap_shortcode").attr("data-pin");var c=1;var d=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-thumb"));var W=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-price"));var S=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type"));var s=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action"));var m="";var v="";var Y="";var e="";var ab=jQuery("#googleMap_shortcode").attr("data-rooms");var D=jQuery("#googleMap_shortcode").attr("data-bathrooms");var q=jQuery("#googleMap_shortcode").attr("data-size");var N=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type"));var R=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action"));var o="";var y="";var ae=1;var r="";var K="";var P="";var p="";var H="";var O="";var n="";var F="";var M="";var l="";var C="";var L="";var k="";var A="";var J="";var j="";var z="";var G="";var h="";var x="";var E="";var f="";var w="";var B="";createMarker_sh(infoBox_sh,Z,I,y,q,ae,aa,X,Q,U,V,c,d,W,S,s,m,v,Y,ab,D,e,r,K,P,p,H,O,n,F,M,l,C,L,k,A,J,j,z,G,h,x,E,f,w,B,N,R);var a=new google.maps.LatLng(ac,b);panorama=I.getStreetView();panorama.setPosition(a);panorama.setPov(({heading:heading,pitch:0}));jQuery("#slider_enable_street_sh").click(function(){cur_lat=jQuery("#googleMap_shortcode").attr("data-cur_lat");cur_long=jQuery("#googleMap_shortcode").attr("data-cur_long");myLatLng=new google.maps.LatLng(cur_lat,cur_long);panorama.setPosition(myLatLng);panorama.setVisible(true);jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").hide()});google.maps.event.addListener(panorama,"closeclick",function(){jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").show()});if(document.getElementById("gmapzoomplus_sh")){google.maps.event.addDomListener(document.getElementById("gmapzoomplus_sh"),"click",function(){var i=parseInt(I.getZoom(),10);i++;if(i>20){i=20}I.setZoom(i)})}if(document.getElementById("gmapzoomminus_sh")){google.maps.event.addDomListener(document.getElementById("gmapzoomminus_sh"),"click",function(){var i=parseInt(I.getZoom(),10);i--;if(i<0){i=0}I.setZoom(i)})}google.maps.event.trigger(Z[0],"click")}function createMarker_sh(p,U,D,u,m,Y,V,S,M,P,Q,a,b,R,O,o,j,r,T,X,z,c,n,G,L,l,E,K,k,B,J,h,y,H,g,w,F,f,v,C,e,t,A,d,s,x,I,N){var W="";var q=new google.maps.LatLng(S,M);var Z=new google.maps.Marker({position:q,map:D,icon:custompin(P),shape:shape,title:Q,zIndex:a,image:b,idul:V,price:R,category:O,action:o,link:j,city:r,area:T,infoWindowIndex:Y,rooms:X,baths:z,cleanprice:c,size:m,county_state:u,category_name:I,action_name:N});U.push(Z);google.maps.event.addListener(Z,"click",function(aa){if(this.image===""){info_image='<img src="'+mapfunctions_vars.path+'/idxdefault.jpg" alt="image" />'}else{info_image=this.image}var ab=decodeURIComponent(this.category.replace(/-/g," "));var ae=decodeURIComponent(this.action.replace(/-/g," "));var ad=decodeURIComponent(this.category_name.replace(/-/g," "));var af=decodeURIComponent(this.action_name.replace(/-/g," "));var i=mapfunctions_vars.in_text;if(ab===""||ae===""){i=" "}var ac;if(this.baths!=""){ac='<span id="infobath">'+this.baths+"</span>"}else{ac=""}var ag;if(this.rooms!=""){ag='<span id="inforoom">'+this.rooms+"</span>"}else{ag=""}var ah;if(this.size!=""){ah='<span id="infosize">'+this.size;if(mapfunctions_vars.measure_sys==="ft"){ah=ah+" ft<sup>2</sup>"}else{ah=ah+" m<sup>2</sup>"}ah=ah+"</span>"}else{ah=""}var ai=this.title.substr(0,45);if(this.title.length>45){ai=ai+"..."}p.setContent('<div class="info_details"><span id="infocloser" onClick=\'javascript:infoBox_sh.close();\' ></span><a href="'+this.link+'">'+info_image+'</a><a href="'+this.link+'" id="infobox_title">'+ai+'</a><div class="prop_detailsx">'+ad+" "+i+" "+af+'</div><div class="prop_pricex">'+this.price+ah+ac+ag+"</div></div>");p.open(D,this);D.setCenter(this.position);switch(infobox_width){case 700:if(mapfunctions_vars.listing_map==="top"){D.panBy(100,-150)}else{if(mapfunctions_vars.small_slider_t==="vertical"){D.panBy(300,-300)}else{D.panBy(10,-110)}}vertical_off=0;break;case 500:D.panBy(50,-120);break;case 400:D.panBy(100,-220);break;case 200:D.panBy(20,-170);break}if(control_vars.show_adv_search_map_close==="no"){$(".search_wrapper").addClass("adv1_close");adv_search_click()}close_adv_search()});if(mapfunctions_vars.generated_pins!=="0"){pan_to_last_pin(q)}}function wpestate_change_map_type(a){if(a==="map-view-roadmap"){map.setMapTypeId(google.maps.MapTypeId.ROADMAP)}else{if(a==="map-view-satellite"){map.setMapTypeId(google.maps.MapTypeId.SATELLITE)}else{if(a==="map-view-hybrid"){map.setMapTypeId(google.maps.MapTypeId.HYBRID)}else{if(a==="map-view-terrain"){map.setMapTypeId(google.maps.MapTypeId.TERRAIN)}}}}}function setMarkers(T,D){console.log("setMarkers");var b;var w;var v=parseInt(jQuery("#gmap_wrapper").attr("data-post_id"));if(isNaN(v)){v=parseInt(jQuery("#googleMapSlider").attr("data-post_id"),10)}var ab=parseInt(mapfunctions_vars.open_height,10);var d=parseInt(mapfunctions_vars.closed_height,10);var h=document.createElement("div");width_browser=jQuery(window).width();infobox_width=700;vertical_pan=-215;if(width_browser<900){infobox_width=500}if(width_browser<600){infobox_width=400}if(width_browser<400){infobox_width=200}var u={content:h,disableAutoPan:true,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:false,pane:"floatPane",enableEventPropagation:true};infoBox=new InfoBox(u);for(var ae=0;ae<D.length;ae++){var a=D[ae];var ac=a[10];var Z=a[1];var S=a[2];var X=decodeURIComponent(a[0]);var W=a[8];var c=a[3];var e=decodeURIComponent(a[4]);var Y=decodeURIComponent(a[5]);var V=decodeURIComponent(a[6]);var t=decodeURIComponent(a[7]);var n=decodeURIComponent(a[9]);var x=decodeURIComponent(a[11]);var aa=decodeURIComponent(a[12]);var f=a[13];var ad=a[14];var G=a[15];var r=a[16];var P=decodeURIComponent(a[17]);var U=decodeURIComponent(a[18]);var p=a[19];var A=a[20];if(mapfunctions_vars.custom_search==="yes"){var s=a[21];var M=a[22];var R=a[23];var q=a[24];var K=a[25];var Q=a[26];var o=a[27];var I=a[28];var O=a[29];var m=a[30];var F=a[31];var N=a[32];var l=a[33];var C=a[34];var L=a[35];var k=a[36];var B=a[37];var J=a[38];var j=a[39];var z=a[40];var H=a[41];var g=a[42];var y=a[43];var E=a[44];if(typeof(M)!=="number"){M=M.replace(" ","-")}if(typeof(K)!=="number"){K=K.replace(" ","-")}if(typeof(I)!=="number"){I=I.replace(" ","-")}if(typeof(F)!=="number"){F=F.replace(" ","-")}if(typeof(C)!=="number"){C=C.replace(" ","-")}if(typeof(B)!=="number"){B=B.replace(" ","-")}if(typeof(z)!=="number"){z=z.replace(" ","-")}if(typeof(y)!=="number"){y=y.replace(" ","-")}}if(typeof(googlecode_regular_vars2)!=="undefined"&&typeof(googlecode_regular_vars2.markers2)!=="undefined"&&googlecode_regular_vars2.markers2.length>2&&typeof(googlecode_regular_vars2.taxonomy)!=="undefined"){if(googlecode_regular_vars2.taxonomy==="property_city"){if(googlecode_regular_vars2.term===x){createMarker(A,r,ae,ac,Z,S,W,X,c,e,Y,V,t,n,x,aa,ad,G,f,s,M,R,q,K,Q,o,I,O,m,F,N,l,C,L,k,B,J,j,z,H,g,y,E,P,U)}}if(googlecode_regular_vars2.taxonomy==="property_area"){if(googlecode_regular_vars2.term===aa){createMarker(A,r,ae,ac,Z,S,W,X,c,e,Y,V,t,n,x,aa,ad,G,f,s,M,R,q,K,Q,o,I,O,m,F,N,l,C,L,k,B,J,j,z,H,g,y,E,P,U)}}if(googlecode_regular_vars2.taxonomy==="property_category"){if(googlecode_regular_vars2.term===V){createMarker(A,r,ae,ac,Z,S,W,X,c,e,Y,V,t,n,x,aa,ad,G,f,s,M,R,q,K,Q,o,I,O,m,F,N,l,C,L,k,B,J,j,z,H,g,y,E,P,U)}}if(googlecode_regular_vars2.taxonomy==="property_action_category"){if(googlecode_regular_vars2.term===t){createMarker(A,r,ae,ac,Z,S,W,X,c,e,Y,V,t,n,x,aa,ad,G,f,s,M,R,q,K,Q,o,I,O,m,F,N,l,C,L,k,B,J,j,z,H,g,y,E,P,U)}}}else{if(typeof(googlecode_regular_vars2)!=="undefined"&&typeof(googlecode_regular_vars2.markers2)!=="undefined"&&googlecode_regular_vars2.markers2.length>2&&typeof(googlecode_regular_vars2.agent_id)!=="undefined"){if(parseInt(googlecode_regular_vars2.agent_id,10)===parseInt(p,10)){createMarker(A,r,ae,ac,Z,S,W,X,c,e,Y,V,t,n,x,aa,ad,G,f,s,M,R,q,K,Q,o,I,O,m,F,N,l,C,L,k,B,J,j,z,H,g,y,E,P,U)}}else{createMarker(A,r,ae,ac,Z,S,W,X,c,e,Y,V,t,n,x,aa,ad,G,f,s,M,R,q,K,Q,o,I,O,m,F,N,l,C,L,k,B,J,j,z,H,g,y,E,P,U)}}if(v===ac){found_id=ae}}if(mapfunctions_vars.generated_pins!=="0"){w=new google.maps.LatLng(Z,S);pan_to_last_pin(w)}if(mapfunctions_vars.is_prop_list==="1"||mapfunctions_vars.is_tax==="1"){show_pins_filters_from_file()}}function createMarker(t,m,V,S,Q,K,N,O,a,b,P,M,o,j,q,R,U,y,c,n,D,J,l,C,I,k,A,H,h,x,F,g,v,E,f,u,B,e,s,z,d,r,w,G,L){var T="";var p=new google.maps.LatLng(Q,K);if(mapfunctions_vars.custom_search==="yes"){T=O.replace("%"," ");T=decodeURIComponent(T.replace(/\+/g," "));Encoder.EncodeType="entity";T=Encoder.htmlDecode(T);var W=new google.maps.Marker({position:p,map:map,icon:custompin(N),shape:shape,title:T,zIndex:a,image:b,idul:S,price:P,category:M,action:o,link:j,city:q,area:R,infoWindowIndex:V,rooms:U,baths:y,size:m,county_state:t,cleanprice:c,size:m,category_name:G,action_name:L,slug1:n,val1:D,howto1:J,slug2:l,val2:C,howto2:I,slug3:k,val3:A,howto3:H,slug4:h,val4:x,howto4:F,slug5:g,val5:v,howto5:E,slug6:f,val6:u,howto6:z,slug7:e,val7:s,howto7:z,slug8:d,val8:r,howto8:w})}else{var W=new google.maps.Marker({position:p,map:map,icon:custompin(N),shape:shape,title:O,zIndex:a,image:b,idul:S,price:P,category:M,action:o,link:j,city:q,area:R,infoWindowIndex:V,rooms:U,baths:y,cleanprice:c,size:m,county_state:t,category_name:G,action_name:L})}gmarkers.push(W);google.maps.event.addListener(W,"click",function(X){map_callback(new_open_close_map);google.maps.event.trigger(map,"resize");if(this.image===""){info_image='<img src="'+mapfunctions_vars.path+'/idxdefault.jpg" alt="image" />'}else{info_image=this.image}var Y=decodeURIComponent(this.category.replace(/-/g," "));var ab=decodeURIComponent(this.action.replace(/-/g," "));var aa=decodeURIComponent(this.category_name.replace(/-/g," "));var ac=decodeURIComponent(this.action_name.replace(/-/g," "));var i=mapfunctions_vars.in_text;if(Y===""||ab===""){i=" "}var Z;if(this.baths!=""){Z='<span id="infobath">'+this.baths+"</span>"}else{Z=""}var ad;if(this.rooms!=""){ad='<span id="inforoom">'+this.rooms+"</span>"}else{ad=""}var ae;if(this.size!=""){ae='<span id="infosize">'+this.size;if(mapfunctions_vars.measure_sys==="ft"){ae=ae+" ft<sup>2</sup>"}else{ae=ae+" m<sup>2</sup>"}ae=ae+"</span>"}else{ae=""}var af=this.title.substr(0,45);if(this.title.length>45){af=af+"..."}infoBox.setContent('<div class="info_details"><span id="infocloser" onClick=\'javascript:infoBox.close();\' ></span><a href="'+this.link+'">'+info_image+'</a><a href="'+this.link+'" id="infobox_title">'+af+'</a><div class="prop_detailsx">'+aa+" "+i+" "+ac+'</div><div class="prop_pricex">'+this.price+ae+Z+ad+"</div></div>");infoBox.open(map,this);map.setCenter(this.position);switch(infobox_width){case 700:if(mapfunctions_vars.listing_map==="top"){map.panBy(100,-150)}else{if(mapfunctions_vars.small_slider_t==="vertical"){map.panBy(300,-300)}else{map.panBy(10,-110)}}vertical_off=0;break;case 500:map.panBy(50,-120);break;case 400:map.panBy(100,-220);break;case 200:map.panBy(20,-170);break}if(control_vars.show_adv_search_map_close==="no"){$(".search_wrapper").addClass("adv1_close");adv_search_click()}close_adv_search()});if(mapfunctions_vars.generated_pins!=="0"){pan_to_last_pin(p)}}function pan_to_last_pin(a){map.setCenter(a)}function setOms(a){for(var b=0;b<a.length;b++){if(typeof oms!=="undefined"){oms.addMarker(a[b])}else{}}}function set_google_search(c){var a,d,b;a=(document.getElementById("google-default-search"));d=new google.maps.places.SearchBox(a);google.maps.event.addListener(d,"places_changed",function(){b=d.getPlaces();if(b.length==0){return}var h=new google.maps.LatLngBounds();for(var g=0,f;f=b[g];g++){var j={url:f.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};var e=new google.maps.Marker({map:c,icon:j,title:f.name,position:f.geometry.location});gmarkers.push(e);h.extend(f.geometry.location)}c.fitBounds(h);c.setZoom(15)});google.maps.event.addListener(c,"bounds_changed",function(){var e=c.getBounds();d.setBounds(e)})}function new_open_close_map(c){if(jQuery("#gmap_wrapper").hasClass("fullmap")){return}if(mapfunctions_vars.open_close_status!=="1"){var d=jQuery("#googleMap").outerHeight();var f=parseInt(mapfunctions_vars.closed_height,10);var b=parseInt(mapfunctions_vars.open_height,10);var a=b;var e=b;if(infoBox!==null){infoBox.close()}if(d===f){a=b;if(Modernizr.mq("only all and (max-width: 940px)")){e=b}else{jQuery("#gmap-menu").show();e=b}new_show_advanced_search();vertical_off=0;jQuery("#openmap").empty().append('<i class="fa fa-angle-up"></i>'+mapfunctions_vars.close_map)}else{if(c===2){jQuery("#gmap-menu").hide();jQuery("#advanced_search_map_form").hide();a=e=f;new_hide_advanced_search();vertical_off=150}}jQuery("#gmap_wrapper").css("height",e+"px");jQuery("#googleMap").css("height",a+"px");jQuery(".tooltip").fadeOut("fast");setTimeout(function(){google.maps.event.trigger(map,"resize")},300)}}function map_cluster(){if(mapfunctions_vars.user_cluster==="yes"){clusterStyles=[{textColor:"#ffffff",opt_textColor:"#ffffff",url:mapfunctions_vars.path+"/cloud.png",height:72,width:72,textSize:15,}];mcOptions={gridSize:50,ignoreHidden:true,maxZoom:parseInt(mapfunctions_vars.zoom_cluster,10),styles:clusterStyles};mcluster=new MarkerClusterer(map,gmarkers,mcOptions);mcluster.setIgnoreHidden(true)}}if(document.getElementById("gmapzoomplus")){google.maps.event.addDomListener(document.getElementById("gmapzoomplus"),"click",function(){var a=parseInt(map.getZoom(),10);a++;if(a>20){a=20}map.setZoom(a)})}if(document.getElementById("gmapzoomminus")){google.maps.event.addDomListener(document.getElementById("gmapzoomminus"),"click",function(){var a=parseInt(map.getZoom(),10);a--;if(a<0){a=0}map.setZoom(a)})}if(document.getElementById("geolocation-button")){google.maps.event.addDomListener(document.getElementById("geolocation-button"),"click",function(){myposition(map);close_adv_search()})}if(document.getElementById("mobile-geolocation-button")){google.maps.event.addDomListener(document.getElementById("mobile-geolocation-button"),"click",function(){myposition(map);close_adv_search()})}jQuery("#mobile-geolocation-button,#geolocation-button").click(function(){myposition(map)});function myposition(a){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showMyPosition,errorCallback,{timeout:10000})}else{alert(mapfunctions_vars.geo_no_brow)}}function errorCallback(){alert(mapfunctions_vars.geo_no_pos)}function showMyPosition(g){var b={coord:[1,1,1,38,38,59,59,1],type:"poly"};var f=new google.maps.LatLng(g.coords.latitude,g.coords.longitude);map.setCenter(f);var a=new google.maps.Marker({position:f,map:map,icon:custompinchild(),shape:b,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message});var d={strokeColor:"#67cfd8",strokeOpacity:0.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:0.2,map:map,center:f,radius:parseInt(mapfunctions_vars.geolocation_radius,10)};var e=new google.maps.Circle(d);var c=new Label({map:map});c.bindTo("position",a);c.bindTo("text",a,"radius");c.bindTo("visible",a);c.bindTo("clickable",a);c.bindTo("zIndex",a)}function custompinchild(){var c;var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}if(typeof(images.userpin)==="undefined"||images.userpin===""){c=mapfunctions_vars.path+"/userpin"+d+".png"}else{c=images.userpin;if(a>1){c=c.replace(".png","_2x.png")}}if(a>1){var b={url:c,size:new google.maps.Size(88,96),scaledSize:new google.maps.Size(44,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}else{var b={url:c,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}return b}jQuery("#googleMap").click(function(a){var b;b=a.timeStamp-ipad_time;if(b>300){ipad_time=a.timeStamp;jQuery(".tooltip").fadeOut("fast");if(Modernizr.mq("only all and (max-width: 1025px)")){if(map.draggable===false){map.setOptions({draggable:true})}else{map.setOptions({draggable:false})}}}});if(document.getElementById("gmap")){google.maps.event.addDomListener(document.getElementById("gmap"),"mouseout",function(){google.maps.event.trigger(map,"resize")})}if(document.getElementById("search_map_button")){google.maps.event.addDomListener(document.getElementById("search_map_button"),"click",function(){infoBox.close()})}if(document.getElementById("advanced_search_map_button")){google.maps.event.addDomListener(document.getElementById("advanced_search_map_button"),"click",function(){infoBox.close()})}jQuery("#gmap-next").click(function(){current_place++;if(current_place>gmarkers.length){current_place=1}while(gmarkers[current_place-1].visible===false){current_place++;if(current_place>gmarkers.length){current_place=1}}if(map.getZoom()<15){map.setZoom(15)}google.maps.event.trigger(gmarkers[current_place-1],"click")});jQuery("#gmap-prev").click(function(){current_place--;if(current_place<1){current_place=gmarkers.length}while(gmarkers[current_place-1].visible===false){current_place--;if(current_place>gmarkers.length){current_place=1}}if(map.getZoom()<15){map.setZoom(15)}google.maps.event.trigger(gmarkers[current_place-1],"click")});jQuery(".advanced_action_div li").click(function(){var a=jQuery(this).val()});if(document.getElementById("gmap-menu")){google.maps.event.addDomListener(document.getElementById("gmap-menu"),"click",function(a){infoBox.close();if(a.target.nodeName==="INPUT"){category=a.target.className;if(a.target.name==="filter_action[]"){if(actions.indexOf(category)!==-1){actions.splice(actions.indexOf(category),1)}else{actions.push(category)}}if(a.target.name==="filter_type[]"){if(categories.indexOf(category)!==-1){categories.splice(categories.indexOf(category),1)}else{categories.push(category)}}show(actions,categories)}})}function getCookieMap(d){var b=d+"=";var a=document.cookie.split(";");for(var e=0;e<a.length;e++){var f=a[e];while(f.charAt(0)==" "){f=f.substring(1)}if(f.indexOf(b)==0){return f.substring(b.length,f.length)}}return""}function visible_or_not(d,b,h,g){if(h!==""&&typeof(h)!=="undefined"){}if(b!==""&&typeof(b)!=="undefined"){if(typeof b==="string"){b=b.toLowerCase()}}if(g==="property_price"&&mapfunctions_vars.slider_price==="yes"){var f=parseInt(jQuery("#price_low").val());var a=parseInt(jQuery("#price_max").val());if(document.cookie.indexOf("my_custom_curr_coef")>=0){var c=parseFloat(getCookieMap("my_custom_curr_coef"));if(c!=0){b=b*c}}else{}if(b>=f&&b<=a){return true}else{return false}}if(g==="none"){return true}if(h!==""&&h!==" "&&h!=="all"&&h!=="All"){var e=parseInt(h,10);if(d==="greater"){if(b>=e){return true}else{return false}}else{if(d==="smaller"){b=parseInt(b,10);if(b<=e){return true}else{return false}}else{if(d==="equal"){if(String(b)===h||h=="all"){return true}else{return false}}else{if(d==="like"){b=decodeURIComponent(b);b=Encoder.htmlDecode(b);b=b.replace(/%20/gi," ");b=b.toLowerCase();b=decodeURI(b);h=h.toLowerCase();h=decodeURI(h);b=b.split(" ").join("-");h=h.split(" ").join("-");h=h.latinise();b=b.latinise();if(b.indexOf(h)>-1){return true}else{return false}}else{if(d==="date bigger"){b=new Date(b);h=new Date(h);if(b>=h){return true}else{return false}}else{if(d==="date smaller"){b=new Date(b);h=new Date(h);if(b<=h){return true}else{return false}}}}}}}}else{return true}}function get_custom_value(a){var c;var b=0;if(a==="adv_categ"||a==="adv_actions"||a==="advanced_city"||a==="advanced_area"||a==="county-state"){c=jQuery("#"+a).attr("data-value")}else{if(a==="property_price"&&mapfunctions_vars.slider_price==="yes"){c=jQuery("#price_low").val()}else{if(a==="property-country"){c=jQuery("#advanced_country").attr("data-value")}else{if(jQuery("#"+a).hasClass("filter_menu_trigger")){c=jQuery("#"+a).attr("data-value");b=1}else{c=jQuery("#"+a).val()}}}}if(typeof(c)!=="undefined"&&b===0){}return c}function show_pins_custom_search(){console.log("show_pins_custom_search");var val1,val2,val3,val4,val5,val6,val7,val8,position;val1=get_custom_value(mapfunctions_vars.slugs[0]);val2=get_custom_value(mapfunctions_vars.slugs[1]);val3=get_custom_value(mapfunctions_vars.slugs[2]);val4=get_custom_value(mapfunctions_vars.slugs[3]);val5=get_custom_value(mapfunctions_vars.slugs[4]);val6=get_custom_value(mapfunctions_vars.slugs[5]);val7=get_custom_value(mapfunctions_vars.slugs[6]);val8=get_custom_value(mapfunctions_vars.slugs[7]);position=parseInt(mapfunctions_vars.slider_price_position);if(mapfunctions_vars.slider_price==="yes"&&position>0){eval("val"+String(mapfunctions_vars.slider_price_position)+"="+jQuery("#price_low").val()+";");eval("val"+String(position+1)+"="+jQuery("#price_max").val()+";")}if(typeof(val1)==="undefined"){val1=""}if(typeof(val2)==="undefined"){val2=""}if(typeof(val3)==="undefined"){val3=""}if(typeof(val4)==="undefined"){val4=""}if(typeof(val5)==="undefined"){val5=""}if(typeof(val6)==="undefined"){val6=""}if(typeof(val7)==="undefined"){val7=""}if(typeof(val8)==="undefined"){val8=""}if(typeof infoBox!=="undefined"&&infoBox!==null){infoBox.close()}var results_no=0;var bounds=new google.maps.LatLngBounds();if(!isNaN(mcluster)){mcluster.setIgnoreHidden(true)}if(typeof gmarkers!=="undefined"){for(var i=0;i<gmarkers.length;i++){if(!visible_or_not(mapfunctions_vars.hows[0],gmarkers[i].val1,val1,mapfunctions_vars.slugs[0])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[1],gmarkers[i].val2,val2,mapfunctions_vars.slugs[1])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[2],gmarkers[i].val3,val3,mapfunctions_vars.slugs[2])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[3],gmarkers[i].val4,val4,mapfunctions_vars.slugs[3])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[4],gmarkers[i].val5,val5,mapfunctions_vars.slugs[4])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[5],gmarkers[i].val6,val6,mapfunctions_vars.slugs[5])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[6],gmarkers[i].val7,val7,mapfunctions_vars.slugs[6])){gmarkers[i].setVisible(false)}else{if(!visible_or_not(mapfunctions_vars.hows[7],gmarkers[i].val8,val8,mapfunctions_vars.slugs[7])){gmarkers[i].setVisible(false)}else{gmarkers[i].setVisible(true);results_no++;bounds.extend(gmarkers[i].getPosition())}}}}}}}}}if(!isNaN(mcluster)){mcluster.repaint()}}if(mapfunctions_vars.generated_pins==="0"||googlecode_regular_vars2.half_map_results=="1"){if(results_no===0){jQuery("#gmap-noresult").show();if(document.getElementById("google_map_prop_list_wrapper")){jQuery("#listing_ajax_container").empty().append('<p class=" no_results_title ">'+mapfunctions_vars.half_no_results+"</p>")}jQuery("#results").hide()}else{jQuery("#gmap-noresult").hide();if(!bounds.isEmpty()){map.fitBounds(bounds)}jQuery("#results, #showinpage,#showinpage_mobile").show();jQuery("#results_no").show().empty().append(results_no);if(parseInt(mapfunctions_vars.is_half)===1){if(first_time_wpestate_show_inpage_ajax_half===0){first_time_wpestate_show_inpage_ajax_half=1}else{wpestate_show_inpage_ajax_half()}}}}else{custom_get_filtering_ajax_result()}google.maps.event.trigger(map,"resize");if(typeof(mcluster)!=="undefined"){mcluster.repaint()}}function wpestate_classic_form_tax_visible(a,b){a=a.toLowerCase();a=decodeURI(a);b=b.toLowerCase();b=decodeURI(b);a=a.split(" ").join("-");b=b.split(" ").join("-");a=a.latinise();b=b.latinise();if(a.indexOf(b)>-1){return true}else{return false}}function show_pins(){console.log("show pins ");if(mapfunctions_vars.custom_search==="yes"){show_pins_custom_search();return}var n=0;var g=jQuery("#adv_actions").attr("data-value");var c=jQuery("#adv_categ").attr("data-value");var h=jQuery("#advanced_city").attr("data-value");var d=jQuery("#advanced_area").attr("data-value");var f=parseInt(jQuery("#adv_rooms").val(),10);var e=parseInt(jQuery("#adv_bath").val(),10);var l=parseInt(jQuery("#price_low").val());var k=parseInt(jQuery("#price_max").val());g=g.trim().toLowerCase();g=g.replace(/ /g,"-",g);c=c.trim().toLowerCase();c=c.replace(/ /g,"-",c);h=h.trim().toLowerCase();h=h.replace(/ /g,"-",h);d=d.trim().toLowerCase();d=d.replace(/ /g,"-",d);if(isNaN(f)){f=0}if(isNaN(e)){e=0}if(isNaN(l)){l=0}if(isNaN(k)){k=0}if(typeof infoBox!=="undefined"&&infoBox!==null){infoBox.close()}var b=new google.maps.LatLngBounds();if(!isNaN(mcluster)){mcluster.setIgnoreHidden(true)}if(typeof gmarkers!=="undefined"){if(document.cookie.indexOf("my_custom_curr_coef")>=0){var m=parseFloat(getCookieMap("my_custom_curr_coef"));var a}for(var j=0;j<gmarkers.length;j++){if(document.cookie.indexOf("my_custom_curr_coef")>=0){if(m!=0){a=parseInt(gmarkers[j].cleanprice,10)*m}}else{a=parseInt(gmarkers[j].cleanprice,10)}if(!wpestate_classic_form_tax_visible(gmarkers[j].action,g)&&g!="all"){gmarkers[j].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[j].category,c)&&c!="all"){gmarkers[j].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[j].area,d)&&d!="all"){gmarkers[j].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[j].city,h)&&h!="all"){gmarkers[j].setVisible(false)}else{if(parseInt(gmarkers[j].rooms,10)!==f&&f!==0){gmarkers[j].setVisible(false)}else{if(parseInt(gmarkers[j].baths,10)!==e&&e!==0){gmarkers[j].setVisible(false)}else{if(a<l&&l!==0){gmarkers[j].setVisible(false)}else{if(a>k&&k!==0){gmarkers[j].setVisible(false)}else{gmarkers[j].setVisible(true);n++;b.extend(gmarkers[j].getPosition())}}}}}}}}}}if(mapfunctions_vars.generated_pins==="0"||googlecode_regular_vars2.half_map_results=="1"){if(n===0){jQuery("#gmap-noresult").show();if(document.getElementById("google_map_prop_list_wrapper")){jQuery("#listing_ajax_container").empty().append('<p class=" no_results_title ">'+mapfunctions_vars.half_no_results+"</p>")}jQuery("#results").hide()}else{jQuery("#gmap-noresult").hide();if(!b.isEmpty()){map.fitBounds(b)}jQuery("#results, #showinpage,#showinpage_mobile").show();jQuery("#results_no").show().empty().append(n);if(parseInt(mapfunctions_vars.is_half)===1){if(first_time_wpestate_show_inpage_ajax_half===0){first_time_wpestate_show_inpage_ajax_half=1}else{wpestate_show_inpage_ajax_half()}}}}else{get_filtering_ajax_result();if(!b.isEmpty()){map.fitBounds(b)}if(mapfunctions_vars.adv_search_type===2||mapfunctions_vars.adv_search_type==="2"){wpestate_show_inpage_ajax_tip2()}}if(typeof(mcluster)!=="undefined"){mcluster.repaint()}}function wpestate_show_inpage_ajax_tip2(){if(jQuery("#gmap-full").hasClass("spanselected")){jQuery("#gmap-full").trigger("click")}if(mapfunctions_vars.custom_search==="yes"){custom_search_start_filtering_ajax(1)}else{start_filtering_ajax(1)}}function wpestate_show_inpage_ajax_half(){jQuery(".half-pagination").remove();if(mapfunctions_vars.custom_search==="yes"){custom_search_start_filtering_ajax(1)}else{start_filtering_ajax(1)}}function enable_half_map_pin_action(){jQuery("#google_map_prop_list_sidebar .listing_wrapper").hover(function(){var a=jQuery(this).attr("data-listid");wpestate_hover_action_pin(a)},function(){var a=jQuery(this).attr("data-listid");wpestate_return_hover_action_pin(a)})}function convertToSlug(a){return a.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}function custompin(b){var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}var c;if(b!==""){if(typeof(images[b])==="undefined"||images[b]===""){c=mapfunctions_vars.path+"/"+b+d+".png"}else{c=images[b];if(a>1){c=c.replace(".png","_2x.png")}}}else{c=mapfunctions_vars.path+"/none.png"}if(typeof(c)==="undefined"){c=mapfunctions_vars.path+"/none.png"}if(a>1){b={url:c,size:new google.maps.Size(118,118),scaledSize:new google.maps.Size(44,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,49),optimized:false}}else{b={url:c,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,49)}}return b}function Label(b){this.setValues(b);var a=this.span_=document.createElement("span");a.style.cssText="position: relative; left: -50%; top: 8px; white-space: nowrap;  padding: 2px; background-color: white;opacity:0.7";var c=this.div_=document.createElement("div");c.appendChild(a);c.style.cssText="position: absolute; display: none"}Label.prototype=new google.maps.OverlayView;Label.prototype.onAdd=function(){var b=this.getPanes().overlayImage;b.appendChild(this.div_);var a=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){a.draw()}),google.maps.event.addListener(this,"visible_changed",function(){a.draw()}),google.maps.event.addListener(this,"clickable_changed",function(){a.draw()}),google.maps.event.addListener(this,"text_changed",function(){a.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){a.draw()}),google.maps.event.addDomListener(this.div_,"click",function(){if(a.get("clickable")){google.maps.event.trigger(a,"click")}})]};Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);for(var b=0,a=this.listeners_.length;b<a;++b){google.maps.event.removeListener(this.listeners_[b])}};Label.prototype.draw=function(){var c=this.getProjection();var b=c.fromLatLngToDivPixel(this.get("position"));var f=this.div_;f.style.left=b.x+"px";f.style.top=b.y+"px";var d=this.get("visible");f.style.display=d?"block":"none";var a=this.get("clickable");this.span_.style.cursor=a?"pointer":"";var e=this.get("zIndex");f.style.zIndex=e;this.span_.innerHTML=this.get("text").toString()};function close_adv_search(){}function new_show_advanced_search(){jQuery("#search_wrapper").removeClass("hidden")}function new_hide_advanced_search(){if(mapfunctions_vars.show_adv_search==="no"){jQuery("#search_wrapper").addClass("hidden")}}function wpestate_hover_action_pin(a){for(var b=0;b<gmarkers.length;b++){if(parseInt(gmarkers[b].idul,10)===parseInt(a,10)){pin_hover_storage=gmarkers[b].icon;gmarkers[b].setIcon(custompinhover())}}}function wpestate_return_hover_action_pin(a){for(var b=0;b<gmarkers.length;b++){if(parseInt(gmarkers[b].idul,10)===parseInt(a,10)){gmarkers[b].setIcon(pin_hover_storage)}}}function custompinhover(){var c,b;var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}c=mapfunctions_vars.path+"/hover"+d+".png";if(a>1){b={url:c,size:new google.maps.Size(132,144),scaledSize:new google.maps.Size(66,72),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,72)}}else{b={url:c,size:new google.maps.Size(90,90),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,72)}}return b}function show_pins_filters_from_file(){console.log("show_pins_filters_from_file");if(jQuery("#a_filter_action").length==0){var e=jQuery("#second_filter_action").attr("data-value");var d=jQuery("#second_filter_categ").attr("data-value");var g=jQuery("#second_filter_cities").attr("data-value");var c=jQuery("#second_filter_areas").attr("data-value");var f=jQuery("#second_filter_county").attr("data-value")}else{var e=jQuery("#a_filter_action").attr("data-value");var d=jQuery("#a_filter_categ").attr("data-value");var g=jQuery("#a_filter_cities").attr("data-value");var c=jQuery("#a_filter_areas").attr("data-value");var f=jQuery("#a_filter_county").attr("data-value")}if(typeof(e)!=="undefined"){e=e.toLowerCase().trim().replace(" ","-")}if(typeof(e)!=="undefined"){d=d.toLowerCase().trim().replace(" ","-")}if(typeof(e)!=="undefined"){g=g.toLowerCase().trim().replace(" ","-")}if(typeof(e)!=="undefined"){c=c.toLowerCase().trim().replace(" ","-")}if(typeof(f)!=="undefined"){f=f.toLowerCase().trim().replace(" ","-")}if(typeof infoBox!=="undefined"&&infoBox!==null){infoBox.close()}var b=new google.maps.LatLngBounds();if(!isNaN(mcluster)){mcluster.setIgnoreHidden(true)}if(typeof gmarkers!=="undefined"){for(var a=0;a<gmarkers.length;a++){if(!wpestate_classic_form_tax_visible(gmarkers[a].action,e)&&e!="all"&&e!="all"&&e!="all-actions"){gmarkers[a].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[a].category,d)&&d!="all"&&d!="all-types"){gmarkers[a].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[a].area,c)&&c!="all"&&c!="all-areas"){gmarkers[a].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[a].city,g)&&g!="all"&&g!="all-cities"){gmarkers[a].setVisible(false)}else{if(!wpestate_classic_form_tax_visible(gmarkers[a].county_state,f)&&f!="all"&&f!="all-counties/states"){gmarkers[a].setVisible(false)}else{gmarkers[a].setVisible(true);b.extend(gmarkers[a].getPosition())}}}}}}if(!isNaN(mcluster)){mcluster.repaint()}}if(!b.isEmpty()){map.fitBounds(b)}}function map_callback(a){a(1)};